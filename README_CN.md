# CloudFlog - ç°ä»£åšå®¢å¹³å°

[English](README.md)

ä¸€ä¸ªç°ä»£çš„ã€åŠŸèƒ½é½å…¨çš„åšå®¢å¹³å°ï¼Œé‡‡ç”¨ React Router v7ã€Cloudflare Workers å’Œ D1 æ•°æ®åº“æ„å»ºã€‚å…·æœ‰ Tailwind CSS å¸¦æ¥çš„ç²¾ç¾ UIã€å…¨é¢çš„ç®¡ç†ä»ªè¡¨æ¿å’Œè¾¹ç¼˜ä¼˜å…ˆæ¶æ„ï¼Œä»¥å®ç°æœ€ä½³æ€§èƒ½ã€‚

## ğŸš€ éƒ¨ç½²

### å…ˆå†³æ¡ä»¶

- **Node.js 18+**
- **Cloudflare è´¦æˆ·**ï¼ˆç”¨äºéƒ¨ç½²ï¼‰

### ä½¿ç”¨ Wrangler éƒ¨ç½²

1. **å…‹éš†ä»“åº“**

   ```bash
   git clone https://github.com/jayliaoo/cloudflog.git
   cd cloudflog
   ```

2. **å®‰è£…ä¾èµ–**
   ```bash
   npm install
   ```

3. **å®‰è£… Wrangler CLI**
   ```bash
   npm install -g wrangler
   ```

4. **ç™»å½• Cloudflare**
   ```bash
   wrangler login
   ```
5. **åˆ›å»º wrangler.jsonc**
   ```bash
   cp wrangler.example.jsonc wrangler.jsonc
   ```
   - å°† `<YOUR_WORKER_NAME>` æ›¿æ¢ä¸ºæ‚¨æƒ³è¦çš„ Worker åç§°ã€‚
   - å°† `<YOUR_ACCOUNT_NAME>` æ›¿æ¢ä¸ºæ‚¨çš„ Cloudflare è´¦æˆ·åç§°ã€‚

6. **åˆ›å»º D1 æ•°æ®åº“**
   ```bash
   wrangler d1 create blog
   ```
   - å½“è¢«é—®åŠâ€œæ‚¨å¸Œæœ› Wrangler ä»£è¡¨æ‚¨æ·»åŠ å—ï¼Ÿâ€æ—¶ï¼Œé€‰æ‹©â€œå¦â€ã€‚
   - å°†è¾“å‡ºä¸­çš„ `database_name` å’Œ `database_id` å¤åˆ¶åˆ° `wrangler.jsonc`ã€‚

7. **è®¾ç½® GitHub OAuth App**
   - è®¿é—® https://github.com/settings/applications/new
   - å°†åº”ç”¨ç¨‹åºåç§°è®¾ç½®ä¸ºâ€œCloudFlogâ€
   - å°†æˆæƒå›è°ƒ URL è®¾ç½®ä¸º `https://<YOUR_WORKER_NAME>.<YOUR_ACCOUNT_NAME>.workers.dev/auth/callback`
   - å¤åˆ¶ Client ID å’Œ Client Secret å¹¶å°†å…¶æ”¾å…¥ secrets ä¸­ï¼š
     ```bash
     wrangler secret put GITHUB_CLIENT_ID
     ```
     ```bash
     wrangler secret put GITHUB_CLIENT_SECRET
     ```

8. **éƒ¨ç½²åº”ç”¨ç¨‹åº**
   ```bash
   npm run deploy
   ```
   - å½“è¢«é—®åŠâ€œæ‚¨çš„æ•°æ®åº“åœ¨è¿ç§»æœŸé—´å¯èƒ½æ— æ³•å¤„ç†è¯·æ±‚ï¼Œæ˜¯å¦ç»§ç»­ï¼Ÿâ€æ—¶ï¼Œé€‰æ‹©â€œæ˜¯â€ã€‚

## ğŸš€ åŠŸèƒ½

### æ ¸å¿ƒåŠŸèƒ½
- **ç°ä»£åšå®¢å¹³å°**ï¼šå®Œæ•´çš„åšå®¢è§£å†³æ–¹æ¡ˆï¼ŒåŒ…æ‹¬æ–‡ç« ã€æ ‡ç­¾ã€è¯„è®ºå’Œç”¨æˆ·ç®¡ç†
- **ç®¡ç†ä»ªè¡¨æ¿**ï¼šåŠŸèƒ½é½å…¨çš„ç®¡ç†ç•Œé¢ï¼Œç”¨äºå†…å®¹ç®¡ç†
- **èº«ä»½éªŒè¯**ï¼šGitHub OAuth é›†æˆï¼Œæ”¯æŒåŸºäºä¼šè¯çš„èº«ä»½éªŒè¯
- **å†…å®¹ç®¡ç†**ï¼šæ”¯æŒ Markdown çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ã€å›¾ç‰‡ä¸Šä¼ å’Œæ ‡ç­¾ç®¡ç†
- **è¯„è®ºç³»ç»Ÿ**ï¼šæ”¯æŒå®¡æ ¸åŠŸèƒ½çš„åµŒå¥—è¯„è®º
- **æœç´¢ä¸è¿‡æ»¤**ï¼šå…¨æ–‡æœç´¢ã€æ ‡ç­¾è¿‡æ»¤å’Œåˆ†é¡µ
- **æµè§ˆé‡è·Ÿè¸ª**ï¼šæ–‡ç« æµè§ˆé‡ç»Ÿè®¡å’Œåˆ†æ

### æŠ€æœ¯ç‰¹ç‚¹
- **è¾¹ç¼˜è®¡ç®—**ï¼šç”± Cloudflare Workers æä¾›æ”¯æŒï¼Œå®ç°å…¨çƒæ€§èƒ½
- **æ•°æ®åº“**ï¼šD1 SQLite æ•°æ®åº“ï¼Œä½¿ç”¨ Drizzle ORM
- **ç°ä»£ UI**ï¼šTailwind CSS v4 ç»„ä»¶
- **TypeScript**ï¼šå…¨é¢çš„ TypeScript æ”¯æŒ
- **SSR**ï¼šä½¿ç”¨ React Router v7 è¿›è¡ŒæœåŠ¡å™¨ç«¯æ¸²æŸ“
- **å“åº”å¼è®¾è®¡**ï¼šç§»åŠ¨ä¼˜å…ˆï¼Œå®Œå…¨å“åº”å¼è®¾è®¡

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯
- **React Router v7**ï¼šé‡‡ç”¨æ–‡ä»¶è·¯ç”±çš„ç°ä»£ React æ¡†æ¶
- **React 19**ï¼šæœ€æ–° Reactï¼Œå…·æœ‰å¹¶å‘ç‰¹æ€§
- **TypeScript**ï¼šç±»å‹å®‰å…¨å¼€å‘
- **Tailwind CSS v4**ï¼šå®ç”¨å·¥å…·ä¼˜å…ˆçš„ CSS æ¡†æ¶
- **Lucide React**ï¼šç²¾ç¾çš„å›¾æ ‡åº“

### åç«¯
- **Cloudflare Workers**ï¼šè¾¹ç¼˜è®¡ç®—å¹³å°
- **D1 Database**ï¼šè¾¹ç¼˜ SQLite æ•°æ®åº“
- **Drizzle ORM**ï¼šç±»å‹å®‰å…¨çš„æ•°æ®åº“å·¥å…·åŒ…
- **GitHub OAuth**ï¼šèº«ä»½éªŒè¯æä¾›å•†

### æ„å»ºä¸å¼€å‘
- **Vite**ï¼šå¿«é€Ÿæ„å»ºå·¥å…·å’Œå¼€å‘æœåŠ¡å™¨
- **Wrangler**ï¼šCloudflare Workers CLI
- **Drizzle Kit**ï¼šæ•°æ®åº“è¿ç§»å’Œå†…çœ

## ğŸ“ é¡¹ç›®ç»“æ„

```
app/
â”œâ”€â”€ components/             # React ç»„ä»¶
â”‚   â”œâ”€â”€ blog/              # åšå®¢ä¸“ç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ PostCard.tsx   # æ–‡ç« é¢„è§ˆå¡ç‰‡
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ layouts/           # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ admin-layout.tsx
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ Pagination.tsx     # åˆ†é¡µç»„ä»¶
â”œâ”€â”€ db/                    # æ•°æ®åº“é…ç½®
â”‚   â”œâ”€â”€ index.ts          # æ•°æ®åº“å®¢æˆ·ç«¯è®¾ç½®
â”‚   â””â”€â”€ schema.ts         # Drizzle æ¨¡å¼å®šä¹‰
â”œâ”€â”€ routes/               # React Router è·¯ç”±
â”‚   â”œâ”€â”€ _index.tsx        # ä¸»é¡µ
â”‚   â”œâ”€â”€ posts.tsx         # åšå®¢åˆ—è¡¨
â”‚   â”œâ”€â”€ posts.$slug.tsx   # å•ç¯‡æ–‡ç« 
â”‚   â”œâ”€â”€ admin.tsx         # ç®¡ç†ä»ªè¡¨æ¿
â”‚   â”œâ”€â”€ admin.*.tsx       # ç®¡ç†å­é¡µé¢
â”‚   â”œâ”€â”€ api.*.ts          # API ç«¯ç‚¹
â”‚   â”œâ”€â”€ auth/             # èº«ä»½éªŒè¯è·¯ç”±
â”‚   â”œâ”€â”€ search.tsx        # æœç´¢åŠŸèƒ½
â”‚   â”œâ”€â”€ tags.tsx          # æ ‡ç­¾åˆ—è¡¨
â”‚   â””â”€â”€ tag.$tagSlug.tsx  # æŒ‰æ ‡ç­¾ç­›é€‰çš„æ–‡ç« 
â”œâ”€â”€ services/             # ä¸šåŠ¡é€»è¾‘
â”‚   â””â”€â”€ posts.service.ts  # æ–‡ç« æœåŠ¡å±‚
â”œâ”€â”€ utils/                # å®ç”¨å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ view-tracking.ts  # æµè§ˆé‡è·Ÿè¸ªå·¥å…·
â”œâ”€â”€ auth.server.ts        # èº«ä»½éªŒè¯é€»è¾‘
â”œâ”€â”€ app.css              # å…¨å±€æ ·å¼
â”œâ”€â”€ root.tsx             # æ ¹å¸ƒå±€
â””â”€â”€ routes.ts            # è·¯ç”±é…ç½®
```

## ğŸ—„ï¸ æ•°æ®åº“æ¨¡å¼

åº”ç”¨ç¨‹åºä½¿ç”¨åŒ…å«ä»¥ä¸‹å®ä½“çš„ç»¼åˆæ•°æ®åº“æ¨¡å¼ï¼š

### ç”¨æˆ·
- ä½¿ç”¨ GitHub OAuth è¿›è¡Œç”¨æˆ·ç®¡ç†
- åŸºäºè§’è‰²çš„è®¿é—®ï¼ˆæ‰€æœ‰è€…/è¯»è€…ï¼‰
- ä¼šè¯ç®¡ç†

### æ–‡ç« 
- å®Œæ•´çš„åšå®¢æ–‡ç« ç®¡ç†
- åŸºäº Slug çš„ URL
- å‘å¸ƒ/è‰ç¨¿çŠ¶æ€
- ç²¾é€‰æ–‡ç« 
- æµè§ˆé‡ç»Ÿè®¡
- å°é¢å›¾ç‰‡

### è¯„è®º
- åµŒå¥—è¯„è®ºç³»ç»Ÿ
- ç”¨æˆ·å½’å±
- è½¯åˆ é™¤
- å®¡æ ¸åŠŸèƒ½

### æ ‡ç­¾
- æ ‡ç­¾ç®¡ç†ç³»ç»Ÿ
- ä¸æ–‡ç« çš„å¤šå¯¹å¤šå…³ç³»
- åŸºäº Slug çš„ URL

### æ–‡ç« æµè§ˆé‡
- ç”¨æˆ·ç‰¹å®šçš„æµè§ˆé‡è·Ÿè¸ª
- åŒ¿åæµè§ˆæ”¯æŒ
- åˆ†ææ•°æ®

## ğŸš€ å…¥é—¨

### å®‰è£…

1. **å…‹éš†ä»“åº“**
   ```bash
   git clone <your-repo-url>
   cd cloudflog
   ```

2. **å®‰è£…ä¾èµ–**
   ```bash
   npm install
   ```

3. **è®¾ç½®ç¯å¢ƒå˜é‡**
   åˆ›å»º `.dev.vars` æ–‡ä»¶ï¼š
   ```bash
   # GitHub OAuth
   GITHUB_CLIENT_ID=your_github_client_id
   GITHUB_CLIENT_SECRET=your_github_client_secret
   ```

4. **è®¾ç½®æ•°æ®åº“**
   ```bash
   # ç”Ÿæˆæ•°æ®åº“è¿ç§»
   npm run db:generate
   
   # æœ¬åœ°åº”ç”¨è¿ç§»
   npm run db:migrate
   ```

5. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
   ```bash
   npm run dev
   ```

6. **æ‰“å¼€æµè§ˆå™¨**
   å¯¼èˆªåˆ° `http://localhost:5173`

## ğŸ“ å¯ç”¨è„šæœ¬

```bash
# å¼€å‘
npm run dev              # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run build           # æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run preview         # é¢„è§ˆç”Ÿäº§ç‰ˆæœ¬

# æ•°æ®åº“
npm run db:generate     # ç”Ÿæˆæ•°æ®åº“è¿ç§»
npm run db:migrate      # æœ¬åœ°åº”ç”¨è¿ç§»
npm run db:migrate-remote # å°†è¿ç§»åº”ç”¨åˆ°è¿œç¨‹ D1

# ç±»å‹æ£€æŸ¥å’Œéƒ¨ç½²
npm run typecheck       # è¿è¡Œ TypeScript ç±»å‹æ£€æŸ¥
npm run cf-typegen      # ç”Ÿæˆ Cloudflare ç±»å‹
npm run deploy          # æ„å»ºå¹¶éƒ¨ç½²åˆ° Cloudflare
```

## ğŸ¨ åŠŸèƒ½æ¦‚è§ˆ

### ä¸»é¡µ (`/`)
- ç²¾é€‰æ–‡ç« è½®æ’­
- æœ€æ–°æ–‡ç« ç½‘æ ¼
- å…³äºéƒ¨åˆ†é›†æˆ
- å“åº”å¼è‹±é›„åŒº

### åšå®¢åˆ—è¡¨ (`/posts`)
- åˆ†é¡µæ–‡ç« åˆ—è¡¨
- å¸¦æœ‰å…ƒæ•°æ®çš„æ–‡ç« å¡ç‰‡
- æ ‡ç­¾è¿‡æ»¤
- æœç´¢åŠŸèƒ½

### å•ç¯‡æ–‡ç«  (`/posts/:slug`)
- å®Œæ•´çš„ Markdown å†…å®¹æ¸²æŸ“
- è¯„è®ºç³»ç»Ÿ
- ç›¸å…³æ–‡ç« 
- æµè§ˆé‡è·Ÿè¸ª
- æ”¯æŒç¤¾äº¤åˆ†äº«

### ç®¡ç†ä»ªè¡¨æ¿ (`/admin`)
- **æ–‡ç« ç®¡ç†**ï¼šåˆ›å»ºã€ç¼–è¾‘ã€å‘å¸ƒã€ç½®é¡¶å’Œåˆ é™¤æ–‡ç« 
- **æ ‡ç­¾ç®¡ç†**ï¼šåˆ›å»ºå’Œç®¡ç†æ ‡ç­¾
- **è¯„è®ºå®¡æ ¸**ï¼šå®¡æŸ¥å’Œå®¡æ ¸è¯„è®º
- **åˆ†æ**ï¼šæµè§ˆé‡å’Œæ–‡ç« ç»Ÿè®¡
- **è¿‡æ»¤**ï¼šæŒ‰çŠ¶æ€ã€æ ‡ç­¾å’Œæœç´¢è¿›è¡Œè¿‡æ»¤
- **æ‰¹é‡æ“ä½œ**ï¼šå‘å¸ƒ/å–æ¶ˆå‘å¸ƒå¤šç¯‡æ–‡ç« 

### æœç´¢ (`/search`)
- æ–‡ç« å…¨æ–‡æœç´¢
- å®æ—¶æœç´¢ç»“æœ
- æ”¯æŒåˆ†é¡µ

### æ ‡ç­¾ (`/tags`, `/tag/:slug`)
- å¸¦æœ‰æ–‡ç« è®¡æ•°çš„æ ‡ç­¾åˆ—è¡¨
- æŒ‰ç‰¹å®šæ ‡ç­¾ç­›é€‰çš„æ–‡ç« 
- åŸºäºæ ‡ç­¾çš„å¯¼èˆª

### èº«ä»½éªŒè¯ (`/auth/*`)
- GitHub OAuth é›†æˆ
- ä¼šè¯ç®¡ç†
- åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶

## ğŸ¤ è´¡çŒ®

1. **Fork ä»“åº“**
2. **åˆ›å»ºåŠŸèƒ½åˆ†æ”¯**
   ```bash
   git checkout -b feature/amazing-feature
   ```
3. **è¿›è¡Œæ›´æ”¹**
4. **è¿è¡Œç±»å‹æ£€æŸ¥**
   ```bash
   npm run typecheck
   ```
5. **æäº¤æ›´æ”¹**
   ```bash
   git commit -m 'Add amazing feature'
   ```
6. **æ¨é€åˆ°åˆ†æ”¯**
   ```bash
   git push origin feature/amazing-feature
   ```
7. **æ‰“å¼€æ‹‰å–è¯·æ±‚**

## ğŸ“ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ğŸ™ è‡´è°¢

- [React Router](https://reactrouter.com/) - ç°ä»£ React æ¡†æ¶
- [Cloudflare](https://cloudflare.com/) - è¾¹ç¼˜è®¡ç®—å¹³å°
- [Drizzle ORM](https://orm.drizzle.team/) - ç±»å‹å®‰å…¨çš„æ•°æ®åº“å·¥å…·åŒ…
- [Tailwind CSS](https://tailwindcss.com/) - å®ç”¨å·¥å…·ä¼˜å…ˆçš„ CSS æ¡†æ¶
- [Lucide](https://lucide.dev/) - ç²¾ç¾çš„å›¾æ ‡åº“

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜ã€ç–‘é—®æˆ–è´¡çŒ®ï¼š

1. **æ–‡æ¡£**ï¼šæŸ¥é˜…æ­¤ README å’Œä»£ç æ³¨é‡Š
2. **é—®é¢˜**ï¼šåœ¨ GitHub ä¸Šæå‡ºé—®é¢˜
3. **è®¨è®º**ï¼šä½¿ç”¨ GitHub Discussions æé—®

---

**ç”¨ â¤ï¸ å’Œç°ä»£ Web æŠ€æœ¯æ„å»º** ğŸš€